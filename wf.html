<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="cloud-container"></div>
    <div class="input-container" id="weather-container">
        <h2>Enter Location</h2>
        <input type="text" id="location" placeholder="City or Address">
        <button onclick="getWeather()">Get Weather</button>
    </div>
    <script>
        async function getWeather() {
            const location = document.getElementById("location").value;
            const container = document.getElementById("weather-container");

            if (location) {
                try {
                    const response = await fetch('http://127.0.0.1:5000/get_weather', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ city: location }),
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        alert(errorData.error || "An error occurred");
                        return;
                    }

                    const weatherData = await response.json();

                    // Replace input box with weather details and a back button
                    container.innerHTML = `
                        <div class="weather-details">
                            <p class="temperature"><b>${weatherData.temperature}Â°C</b></p>
                            <p class="details">${weatherData.description}</p>
                            <p class="details">Humidity: ${weatherData.humidity}%</p>
                            <button onclick="goBack()" class="back-button">Back</button>
                        </div>
                    `;
                } catch (error) {
                    console.error("Error fetching weather data:", error);
                    alert("Failed to fetch weather data. Please try again.");
                }
            } else {
                alert("Please enter a location.");
            }
        }

        function goBack() {
            const container = document.getElementById("weather-container");
            container.innerHTML = `
                <div class="input-box">
                    <h2>Enter Location</h2>
                    <input type="text" id="location" placeholder="City or Address">
                    <button onclick="getWeather()">Get Weather</button>
                </div>
            `;
        }
    </script>
</body>
</html>
